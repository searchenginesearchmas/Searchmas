<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Searchmas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{margin:0;padding:0;height:100%}
body{
  font-family:Arial,sans-serif;
  background:url('Santa.png') center/cover no-repeat;
  color:#202124;
}
#home,#results{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center}
#results{display:none;align-items:stretch}
.logo{font-size:64px;font-weight:bold}
.logo span:nth-child(2),.logo span:nth-child(6){color:#ff9800}
input{
  width:90%;
  max-width:600px;
  padding:14px 20px;
  font-size:18px;
  border-radius:24px;
  border:1px solid #dfe1e5;
}
.tabs{display:flex;gap:20px;margin:20px;border-bottom:1px solid #ccc}
.tab{cursor:pointer;padding-bottom:8px}
.tab.active{border-bottom:3px solid #1a73e8}
#content{padding:20px}
#aiBox{white-space:pre-wrap;line-height:1.6}
.debug{color:#b00020;font-size:13px;margin-top:10px}
</style>
</head>

<body>

<div id="home">
  <div class="logo">
    <span>S</span><span>e</span><span>a</span><span>r</span><span>c</span><span>h</span><span>m</span><span>a</span><span>s</span>
  </div>
  <input id="qHome" placeholder="Search or ask AI">
</div>

<div id="results">
  <input id="qTop">
  <div class="tabs">
    <div class="tab active" data-tab="ai">AI Mode</div>
    <div class="tab" data-tab="all">All</div>
  </div>
  <div id="content"></div>
</div>

<script>
const GEMINI_KEY = "AIzaSyD90LLYotrBiOhaM6YUecNVauYosFDL5kI";
let tab = "ai";

qHome.onkeydown = e => e.key==="Enter" && enter();
qTop.onkeydown = e => e.key==="Enter" && search();

document.querySelectorAll(".tab").forEach(t=>{
  t.onclick=()=>{
    tab=t.dataset.tab;
    document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
    t.classList.add("active");
    search();
  };
});

function enter(){
  home.style.display="none";
  results.style.display="flex";
  qTop.value=qHome.value;
  search();
}

function search(){
  content.innerHTML="";
  const q=qTop.value.trim();
  if(!q){content.innerHTML="Ask something ðŸ™‚";return;}

  if(tab==="ai"){
    content.innerHTML="<div id='aiBox'>Thinkingâ€¦</div>";

    fetch(
      "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent?key="+GEMINI_KEY,
      {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({
          contents:[{parts:[{text:q}]}],
          generationConfig:{
            temperature:0.7,
            maxOutputTokens:512
          }
        })
      }
    )
    .then(r=>r.json())
    .then(d=>{
      const box=document.getElementById("aiBox");

      if(d.error){
        box.innerHTML="âŒ API ERROR\n"+d.error.message;
        return;
      }

      if(d.candidates?.length){
        const parts=d.candidates[0].content?.parts;
        if(parts?.length){
          box.innerText=parts.map(p=>p.text||"").join("");
          return;
        }
      }

      box.innerHTML="âš ï¸ Gemini returned no text.\n\nDEBUG:\n"+JSON.stringify(d,null,2);
    })
    .catch(e=>{
      document.getElementById("aiBox").innerText="Network error: "+e.message;
    });
  }
}
</script>

</body>
</html>
