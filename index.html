<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Searchmas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="favicon.png">

<!-- Google PSE -->
<script async src="https://cse.google.com/cse.js?cx=949e339dabb3b4e60"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:
    url("Santa.png") left center / 50% 100vh no-repeat fixed,
    url("Santa.png") right center / 50% 100vh no-repeat fixed,
    #f2f2f2;
}

.wrapper{
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-top:60px;
}

.logo{
  font-size:42px;
  font-weight:bold;
  color:#e53935;
  margin-bottom:20px;
}

.searchBar{
  display:flex;
  gap:10px;
  width:95%;
  max-width:900px;
}

.searchBar input{
  flex:1;
  padding:14px;
  font-size:16px;
  border-radius:999px;
  border:1px solid #ddd;
}

.searchBar button{
  padding:14px 22px;
  border:none;
  border-radius:999px;
  background:#e53935;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.tabs{
  margin-top:20px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.tabBtn{
  padding:10px 18px;
  border-radius:999px;
  border:none;
  background:#eee;
  cursor:pointer;
  font-weight:bold;
}

.tabBtn.active{
  background:#e53935;
  color:white;
}

.backBtn{
  margin-top:20px;
  padding:10px 18px;
  border:none;
  border-radius:999px;
  background:#444;
  color:white;
  cursor:pointer;
}

.resultsCard{
  width:95%;
  max-width:900px;
  margin-top:20px;
  background:white;
  border-radius:20px;
  padding:20px;
  box-shadow:0 4px 20px rgba(0,0,0,0.1);
}
</style>
</head>

<body>

<div class="wrapper">

<div class="logo">Searchmas</div>

<div class="searchBar">
<input id="searchInput" placeholder="Search Searchmas">
<button onclick="doSearch()">Search</button>
</div>

<div class="tabs">
<button class="tabBtn active" onclick="switchTab('all',this)">All</button>
<button class="tabBtn" onclick="switchTab('images',this)">Images</button>
<button class="tabBtn" onclick="switchTab('videos',this)">Videos</button>
<button class="tabBtn" onclick="switchTab('news',this)">News</button>
</div>

<button class="backBtn" onclick="goHome()">Back</button>

<div id="resultsArea"></div>

</div>

<script>
let currentTab="all";
let lastQuery="";

function switchTab(tab,btn){
  currentTab=tab;
  document.querySelectorAll(".tabBtn").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");

  if(lastQuery) renderResults(lastQuery);
}

function goHome(){
  document.getElementById("resultsArea").innerHTML="";
}

function doSearch(){
  const q=document.getElementById("searchInput").value.trim();
  if(!q) return;
  lastQuery=q;
  renderResults(q);
}

function callPSE(q){
  if(window.google && google.search && google.search.cse){
    google.search.cse.element.go(q);
    return true;
  }
  return false;
}

function renderResults(q){
  const area=document.getElementById("resultsArea");

  if(currentTab==="all"){
    area.innerHTML=`
      <div class="resultsCard">
        <div class="gcse-searchresults-only"></div>
      </div>
    `;

    // Try after render
    setTimeout(()=>{
      if(!callPSE(q)){
        // Retry once if script still loading
        setTimeout(()=>callPSE(q),600);
      }
    },300);

    return;
  }

  if(currentTab==="news"){
    area.innerHTML=`<div class="resultsCard"><p>News results coming soon.</p></div>`;
    return;
  }

  if(currentTab==="images"){
    window.open("https://www.google.com/search?tbm=isch&q="+encodeURIComponent(q));
    return;
  }

  if(currentTab==="videos"){
    window.open("https://www.google.com/search?tbm=vid&q="+encodeURIComponent(q));
    return;
  }
}
</script>

</body>
</html>
