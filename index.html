<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Searchmas</title>

<!-- Google PSE -->
<script async src="https://cse.google.com/cse.js?cx=YOUR_PSE_ID"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0b0b0b;
  color:white;
}

/* Top Search Bar */
.search-bar{
  width:100%;
  max-width:700px;
  margin:40px auto 20px;
  display:flex;
  gap:10px;
}

.search-bar input{
  flex:1;
  padding:14px;
  border-radius:12px;
  border:none;
  font-size:16px;
}

.search-bar button{
  padding:14px 22px;
  border:none;
  border-radius:12px;
  background:#ff3b3b;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

/* Tabs */
.tabs{
  display:flex;
  justify-content:center;
  gap:25px;
  margin-bottom:20px;
}

.tabs button{
  background:none;
  border:none;
  color:white;
  font-size:16px;
  cursor:pointer;
  opacity:0.7;
}

.tabs button.active{
  opacity:1;
  border-bottom:2px solid red;
}

/* Results Area */
#results{
  width:90%;
  max-width:900px;
  margin:auto;
}

/* Transparent Google PSE */
.gsc-control-cse,
.gsc-control-cse *{
  background:transparent !important;
  border:none !important;
  box-shadow:none !important;
}

/* Hide extra Google UI */
.gsc-above-wrapper-area,
.gsc-tabsArea,
.gsc-adBlock,
.gcsc-find-more-on-google{
  display:none !important;
}
</style>
</head>

<body>

<!-- Search Box -->
<div class="search-bar">
  <input id="searchInput" placeholder="Search Searchmas...">
  <button onclick="doSearch()">Search</button>
</div>

<!-- Tabs -->
<div class="tabs">
  <button id="tabAll" class="active" onclick="switchTab('all')">All</button>
  <button onclick="switchTab('images')">Images</button>
  <button onclick="switchTab('news')">News</button>
</div>

<!-- Results -->
<div id="results">
  <div class="gcse-searchresults-only"></div>
</div>

<script>
let currentTab = "all";

function switchTab(tab){
  currentTab = tab;

  document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
  if(tab==="all") document.getElementById("tabAll").classList.add("active");

  if(tab==="all"){
    autoLoadPSE(getQueryFromHash());
  }else{
    document.querySelector(".gcse-searchresults-only").innerHTML =
      "<p style='opacity:.6;text-align:center'>No PSE for this tab</p>";
  }
}

function doSearch(){
  const q = document.getElementById("searchInput").value.trim();
  if(!q) return;

  // REAL PSE trigger hash (not decorative)
  location.hash = "#gsc.tab=0&gsc.q=" + encodeURIComponent(q) + "&gsc.page=1";

  autoLoadPSE(q);
}

function getQueryFromHash(){
  const params = new URLSearchParams(location.hash.replace("#",""));
  return params.get("gsc.q") || "";
}

function autoLoadPSE(query){
  if(!query) return;

  const wait = setInterval(()=>{
    if(window.google && google.search && google.search.cse){
      const el = document.querySelector(".gsc-input");
      if(el){
        el.value = query;
        google.search.cse.element.getElement().execute(query);
        clearInterval(wait);
      }
    }
  },200);
}

/* Auto load on page open */
window.addEventListener("load", ()=>{
  const q = getQueryFromHash();
  if(q){
    document.getElementById("searchInput").value = q;
    autoLoadPSE(q);
  }
});
</script>

</body>
</html>
