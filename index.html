<!DOCTYPE html>
<html lang="en">
<head>
  <title>Searchmas</title>
  <link rel="icon" href="favicon.ico">
</head>
<body>

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  min-height:100%;
  font-family:Arial,sans-serif;
  color:#202124;
}

/* Santa background */
body{
  background:url('./Santa.png') left top / 50% 100% repeat-y,
             url('./Santa.png') right top / 50% 100% repeat-y;
}
@media(max-width:768px){
  body{
    background:url('./Santa.png') center top / contain repeat-y;
  }
}

/* Home */
#home{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
}

/* Logo */
.logo{
  font-size:56px;
  font-weight:bold;
  margin-bottom:20px;
}
.logo span.b{color:#4285f4}
.logo span.o{color:#ff9800}
.logo span.y{color:#fbbc05}
.logo span.g{color:#34a853}

/* Inputs */
input{
  width:90%;
  max-width:520px;
  padding:12px 18px;
  font-size:16px;
  border-radius:24px;
  border:1px solid #dfe1e5;
}

/* Results */
#results{
  display:none;
  padding:12px;
  max-width:1100px;
  margin:auto;
}

/* Top bar */
.topbar{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:12px;
}
.back{
  font-size:22px;
  cursor:pointer;
}
.topbar input{
  flex:1;
  max-width:none;
}

/* Tabs */
.tabs{
  display:flex;
  gap:16px;
  border-bottom:1px solid #ddd;
  margin-bottom:14px;
  overflow-x:auto;
}
.tab{
  padding:6px 0;
  cursor:pointer;
  color:#5f6368;
  white-space:nowrap;
}
.tab.active{
  color:#1a73e8;
  border-bottom:2px solid #1a73e8;
}

/* Results layout */
.result-item{margin:14px 0;}
.result-title{font-size:18px;color:#1a73e8;cursor:pointer;}
.result-url{font-size:13px;color:#188038;}

/* Grid */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
  gap:10px;
}
.grid img{
  width:100%;
  border-radius:8px;
}
.video-title{
  font-size:13px;
  margin-top:4px;
}
</style>

<div id="home">
  <div class="logo">
    <span class="b">S</span><span class="o">e</span><span class="y">a</span>
    <span class="b">r</span><span class="g">c</span><span class="o">h</span>
    <span class="b">m</span><span class="y">a</span><span class="g">s</span>
  </div>
  <input id="homeSearch" placeholder="Search the web" onkeydown="homeEnter(event)">
</div>

<div id="results">
  <div class="topbar">
    <div class="back" onclick="goHome()">â¬…</div>
    <input id="topSearch" placeholder="Search again" onkeydown="topEnter(event)">
  </div>

  <div class="tabs">
    <div class="tab active" onclick="setTab('all')">All</div>
    <div class="tab" onclick="setTab('images')">Images</div>
    <div class="tab" onclick="setTab('videos')">Videos</div>
    <div class="tab" onclick="setTab('news')">News</div>
    <div class="tab" onclick="setTab('flights')">Flights</div>
  </div>

  <div id="content"></div>
</div>

<script>
let currentTab="all";
const UNSPLASH="Wsi2QpvPXyiNLfGRbZX8MwbDg7oqCQQFtibqIu02nWA";
const YT="AIzaSyBKN7qNWVOSjIf040epQA579G29IzPxqpI";

function homeEnter(e){
  if(e.key==="Enter"){
    startSearch(e.target.value);
  }
}
function topEnter(e){
  if(e.key==="Enter"){
    startSearch(e.target.value);
  }
}

function startSearch(q){
  q=q.trim();
  if(!q)return;
  history.pushState(null,"",`?q=${encodeURIComponent(q)}`);
  document.getElementById("home").style.display="none";
  document.getElementById("results").style.display="block";
  document.getElementById("topSearch").value=q;
  renderTab(q);
}

function goHome(){
  history.pushState(null,"","./");
  document.getElementById("results").style.display="none";
  document.getElementById("home").style.display="flex";
}

function setTab(tab){
  currentTab=tab;
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  event.target.classList.add("active");
  const q=new URLSearchParams(location.search).get("q");
  if(q)renderTab(q);
}

function renderTab(q){
  const content=document.getElementById("content");
  const enc=encodeURIComponent(q);
  content.innerHTML="";

  if(currentTab==="all"){
    const engines=[
      {name:"Google",url:`https://www.google.com/search?q=${enc}`,domain:"google.com"},
      {name:"Bing",url:`https://www.bing.com/search?q=${enc}`,domain:"bing.com"},
      {name:"DuckDuckGo",url:`https://duckduckgo.com/?q=${enc}`,domain:"duckduckgo.com"}
    ];
    engines.forEach(e=>{
      content.innerHTML+=`
        <div class="result-item">
          <div class="result-title" onclick="window.open('${e.url}')">${e.name}</div>
          <div class="result-url">${e.domain}</div>
        </div>`;
    });
  }

  if(currentTab==="images"){
    fetch(`https://api.unsplash.com/search/photos?query=${enc}&per_page=18&client_id=${UNSPLASH}`)
    .then(r=>r.json()).then(d=>{
      let html="<div class='grid'>";
      d.results.forEach(i=>{
        html+=`<img src="${i.urls.small}">`;
      });
      html+="</div>";
      content.innerHTML=html;
    });
  }

  if(currentTab==="videos"){
    fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=12&q=${enc}&key=${YT}`)
    .then(r=>r.json()).then(d=>{
      let html="<div class='grid'>";
      d.items.forEach(v=>{
        html+=`
        <div>
          <a target="_blank" href="https://youtube.com/watch?v=${v.id.videoId}">
            <img src="${v.snippet.thumbnails.medium.url}">
          </a>
          <div class="video-title">${v.snippet.title}</div>
        </div>`;
      });
      html+="</div>";
      content.innerHTML=html;
    });
  }

  if(currentTab==="news"){
    content.innerHTML=`
      <div class="result-item">
        <div class="result-title" onclick="window.open('https://news.google.com/search?q=${enc}')">Google News</div>
        <div class="result-url">news.google.com</div>
      </div>`;
  }

  if(currentTab==="flights"){
    content.innerHTML=`
      <div class="result-item">
        <div class="result-title" onclick="window.open('https://www.flightradar24.com')">Flightradar24</div>
        <div class="result-url">flightradar24.com</div>
      </div>`;
  }
}

/* Load from ?q= */
window.onload=()=>{
  const q=new URLSearchParams(location.search).get("q");
  if(q)startSearch(q);
};
</script>

</body>
</html>
