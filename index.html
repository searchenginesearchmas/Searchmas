<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Searchmas</title>
<link rel="icon" type="image/png" href="favicon.png">
<link rel="manifest" href="manifest.json">

<style>
html, body {margin:0; padding:0; font-family:Arial,sans-serif; min-height:100vh;}
body{
  margin:0;
  display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
}
#home, #results {width:100%; max-width:1400px; display:flex; flex-direction:column; align-items:center; padding:20px;}
.logo{
  font-size:clamp(36px,8vw,72px);
  font-weight:bold;
  margin-bottom:20px;
  text-align:center;
}
.logo span:nth-child(1){color:#4285f4}
.logo span:nth-child(2){color:#ff9800}
.logo span:nth-child(3){color:#fbbc05}
.logo span:nth-child(4){color:#4285f4}
.logo span:nth-child(5){color:#34a853}
.logo span:nth-child(6){color:#ff9800}
.logo span:nth-child(7){color:#fbbc05}
.logo span:nth-child(8){color:#4285f4}
.logo span:nth-child(9){color:#34a853}

.search-container{width:90%; max-width:600px; margin-bottom:20px;}
#results {display:none; width:100%; padding:10px;}
.topbar{display:flex; gap:10px; align-items:center; margin-bottom:12px; flex-wrap:wrap;}
.back{cursor:pointer; font-size:22px; flex-shrink:0;}
.tabs{
  display:flex; gap:12px; margin:15px 0; border-bottom:1px solid #ddd; flex-wrap:wrap;
}
.tab{
  cursor:pointer; color:#5f6368; padding:8px 12px; border-radius:16px;
}
.tab.active{color:#1a73e8; border:2px solid #1a73e8; background:rgba(26,115,232,0.1);}
#content{display:flex; flex-direction:column; gap:12px; width:100%;}
.grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:12px;}
.grid img{width:100%; aspect-ratio:16/9; object-fit:cover; border-radius:8px;}
.grid div.video{cursor:pointer; border:1px solid #ccc; padding:6px; border-radius:8px;}

@media(max-width:768px){
  .grid{grid-template-columns:1fr;}
}
</style>
</head>
<body id="body">

<div id="home">
  <div class="logo">
    <span>S</span><span>e</span><span>a</span><span>r</span><span>c</span>
    <span>h</span><span>m</span><span>a</span><span>s</span>
  </div>
  <div class="search-container">
    <input type="text" placeholder="Search..." id="search-input" style="width:100%; padding:10px; font-size:16px;">
  </div>
  <button onclick="doSearch()" style="padding:10px 20px; font-size:16px;">Search</button>
</div>

<div id="results">
  <div class="topbar">
    <div class="back" onclick="goHome()">â¬…</div>
    <div class="search-container" style="flex:1;">
      <input type="text" placeholder="Search..." id="search-input-results" style="width:100%; padding:10px; font-size:16px;">
    </div>
    <button onclick="doSearchResults()" style="padding:8px 16px;">Search</button>
  </div>

  <div class="tabs">
    <div class="tab active" data-id="all">All</div>
    <div class="tab" data-id="images">Images</div>
    <div class="tab" data-id="videos">Videos</div>
    <div class="tab" data-id="news">News</div>
  </div>

  <div id="content">
    <div id="all-results"></div>
    <div class="grid" id="image-results" style="display:none;"></div>
    <div class="grid" id="video-results" style="display:none;"></div>
  </div>
</div>

<script>
// === WIRED KEYS ===
const UNSPLASH_KEY = "1IF0KThuYgH722kFgZ5TaZ1tyckTiMUri6DxUSeZ-fk";
const YOUTUBE_KEY = "AIzaSyBKN7qNWVOSjIf040epQA579G29IzPxqpI";

function updateBackground(){
  if(window.innerWidth < 768){
    document.getElementById('body').style.backgroundImage="url('Santa-mobile.png')";
  }else{
    document.getElementById('body').style.backgroundImage="url('Santa.png')";
  }
}
window.addEventListener('resize', updateBackground);
updateBackground();

function goHome(){
  document.getElementById("results").style.display="none";
  document.getElementById("home").style.display="flex";
}

// Tabs
const tabs = document.querySelectorAll('.tab');
tabs.forEach(tab=>{
  tab.addEventListener('click',()=>{
    tabs.forEach(t=>t.classList.remove('active'));
    tab.classList.add('active');
    switchTab(tab.dataset.id);
  });
});

function switchTab(id){
  document.getElementById('image-results').style.display='none';
  document.getElementById('video-results').style.display='none';
  document.getElementById('all-results').style.display='none';
  if(id==='images') {
    document.getElementById('image-results').style.display='grid';
    fetchImages();
  } else if(id==='videos'){
    document.getElementById('video-results').style.display='grid';
    fetchVideos();
  } else {
    document.getElementById('all-results').style.display='block';
    fetchImages();
    fetchVideos();
  }
}

// Search triggers
function doSearch(){
  const q = document.getElementById('search-input').value;
  document.getElementById('search-input-results').value = q;
  document.getElementById('home').style.display='none';
  document.getElementById('results').style.display='flex';
  switchTab('all');
}

function doSearchResults(){
  const q = document.getElementById('search-input-results').value;
  document.getElementById('search-input').value = q;
  switchTab('all');
}

// === Unsplash Fetch ===
async function fetchImages(){
  const query = document.getElementById('search-input-results').value || "nature";
  const url = `https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&client_id=${UNSPLASH_KEY}&per_page=12`;
  try{
    const res = await fetch(url);
    const data = await res.json();
    const grid = document.getElementById('image-results');
    grid.innerHTML='';
    data.results.forEach(img=>{
      const el = document.createElement('img');
      el.src = img.urls.small;
      grid.appendChild(el);
    });
  }catch(e){console.error(e);}
}

// === YouTube V3 Fetch ===
async function fetchVideos(){
  const query = document.getElementById('search-input-results').value || "fun";
  const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&q=${encodeURIComponent(query)}&key=${YOUTUBE_KEY}&maxResults=12`;
  try{
    const res = await fetch(url);
    const data = await res.json();
    const grid = document.getElementById('video-results');
    grid.innerHTML='';
    data.items.forEach(v=>{
      const div = document.createElement('div');
      div.className='video';
      div.innerHTML = `<img src="${v.snippet.thumbnails.medium.url}" alt=""><br><strong>${v.snippet.title}</strong><br>${v.snippet.channelTitle}`;
      div.onclick = ()=>window.open(`https://www.youtube.com/watch?v=${v.id.videoId}`,'_blank');
      grid.appendChild(div);
    });
  }catch(e){console.error(e);}
}
</script>
</body>
</html>
