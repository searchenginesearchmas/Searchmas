<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Searchmas</title>

<!-- YOUR REAL GOOGLE PSE -->
<script async src="https://cse.google.com/cse.js?cx=949e339dabb3b4e60"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0b0b0b;
  color:white;
}

/* HOME */
#home{
  text-align:center;
  padding-top:80px;
}

.home-search{
  width:90%;
  max-width:650px;
  margin:auto;
  display:flex;
  gap:10px;
}

.home-search input{
  flex:1;
  padding:14px;
  border-radius:14px;
  border:none;
  font-size:16px;
}

.home-search button{
  padding:14px 24px;
  border:none;
  border-radius:14px;
  background:#ff3b3b;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

/* RESULTS PAGE */
#resultsPage{
  display:none;
}

.topbar{
  display:flex;
  align-items:center;
  gap:12px;
  padding:15px 20px;
}

.backBtn{
  background:#1f1f1f;
  border:none;
  color:white;
  padding:10px 16px;
  border-radius:10px;
  cursor:pointer;
}

.results-search{
  flex:1;
  display:flex;
  gap:10px;
}

.results-search input{
  flex:1;
  padding:12px;
  border-radius:12px;
  border:none;
}

/* Tabs */
.tabs{
  display:flex;
  justify-content:center;
  gap:25px;
  margin:15px 0;
}

.tabs button{
  background:none;
  border:none;
  color:white;
  font-size:15px;
  cursor:pointer;
  opacity:.6;
}

.tabs button.active{
  opacity:1;
  border-bottom:2px solid red;
}

/* Results container */
#results{
  width:90%;
  max-width:900px;
  margin:auto;
}

/* Transparent Google PSE */
.gsc-control-cse,
.gsc-control-cse *{
  background:transparent !important;
  border:none !important;
  box-shadow:none !important;
}

.gsc-above-wrapper-area,
.gsc-tabsArea,
.gsc-adBlock,
.gcsc-find-more-on-google{
  display:none !important;
}
</style>
</head>

<body>

<!-- HOME -->
<div id="home">
  <h1>Searchmas</h1>
  <div class="home-search">
    <input id="homeInput" placeholder="Search Searchmas...">
    <button onclick="startSearch()">Search</button>
  </div>
</div>

<!-- RESULTS PAGE -->
<div id="resultsPage">

  <div class="topbar">
    <button class="backBtn" onclick="goHome()">‚Üê Back</button>

    <div class="results-search">
      <input id="resultsInput">
      <button onclick="searchFromResults()">Search</button>
    </div>
  </div>

  <div class="tabs">
    <button id="tabAll" class="active" onclick="switchTab('all')">All</button>
    <button id="tabImages" onclick="switchTab('images')">Images</button>
    <button id="tabNews" onclick="switchTab('news')">News</button>
    <button id="tabVideos" onclick="switchTab('videos')">Videos</button>
  </div>

  <div id="results">
    <div class="gcse-searchresults-only"></div>
  </div>

</div>

<script>
let currentTab = "all";

/* HOME SEARCH */
function startSearch(){
  const q = document.getElementById("homeInput").value.trim();
  if(!q) return;

  openResults(q);
}

/* RESULTS SEARCH */
function searchFromResults(){
  const q = document.getElementById("resultsInput").value.trim();
  if(!q) return;

  runSearch(q);
}

/* OPEN RESULTS PAGE */
function openResults(q){
  document.getElementById("home").style.display="none";
  document.getElementById("resultsPage").style.display="block";

  document.getElementById("resultsInput").value = q;

  runSearch(q);
}

/* BACK BUTTON */
function goHome(){
  document.getElementById("home").style.display="block";
  document.getElementById("resultsPage").style.display="none";
}

/* TAB SWITCH */
function switchTab(tab){
  currentTab = tab;

  document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));

  if(tab==="all") document.getElementById("tabAll").classList.add("active");
  if(tab==="images") document.getElementById("tabImages").classList.add("active");
  if(tab==="news") document.getElementById("tabNews").classList.add("active");
  if(tab==="videos") document.getElementById("tabVideos").classList.add("active");

  const q = document.getElementById("resultsInput").value.trim();
  if(q) runSearch(q);
}

/* RUN REAL PSE SEARCH */
function runSearch(q){

  let finalQuery = q;

  if(currentTab==="images") finalQuery = q + " images";
  if(currentTab==="news") finalQuery = q + " news";
  if(currentTab==="videos") finalQuery = q + " videos";

  /* REAL HASH TRIGGER */
  location.hash = "#gsc.tab=0&gsc.q=" + encodeURIComponent(finalQuery) + "&gsc.page=1";

  autoLoadPSE(finalQuery);
}

/* FORCE PSE EXECUTE */
function autoLoadPSE(query){
  const wait = setInterval(()=>{
    if(window.google && google.search && google.search.cse){
      try{
        google.search.cse.element.getElement().execute(query);
        clearInterval(wait);
      }catch(e){}
    }
  },200);
}

/* HASH AUTO LOAD */
window.addEventListener("load", ()=>{
  const hash = new URLSearchParams(location.hash.replace("#",""));
  const q = hash.get("gsc.q");

  if(q){
    openResults(q);
  }
});
</script>

</body>
</html>
