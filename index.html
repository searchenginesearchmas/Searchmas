<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Searchmas ðŸŽ…ðŸŽ„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { margin:0; font-family:sans-serif; color:#fff; }
    .split { display:flex; min-height:100vh; }
    .half { flex:1; background:url('https://cdn.fcglcdn.com/brainbees/images/products/583x720/19208325a.webp') center/cover no-repeat; }
    .card { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:min(900px,92vw); padding:20px; background:rgba(0,0,0,0.65); border-radius:16px; }
    h1 { margin:0; text-align:center; font-size:2em; }
    .header { display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; }
    .profile-btn { display:flex; align-items:center; gap:8px; cursor:pointer; }
    .profile-btn img { width:32px; height:32px; border-radius:50%; }
    .bar { display:flex; gap:10px; margin-bottom:12px; }
    .bar input { flex:1; padding:12px; border-radius:8px; border:1px solid #444; background:#1b1b1b; color:#fff; }
    .bar button { padding:12px; border-radius:8px; border:none; background:#ff5ca8; color:#fff; cursor:pointer; }
    .tabs { display:flex; gap:8px; flex-wrap:wrap; margin:12px 0; }
    .tabs button { padding:8px 12px; border-radius:6px; background:#333; color:#fff; border:none; cursor:pointer; }
    .tabs button.active { background:#ff5ca8; }
    #content { margin-top:16px; }
    .item { margin-bottom:12px; display:flex; align-items:center; gap:10px; }
    .item img { width:32px; height:32px; }
    .item a { color:#fff; text-decoration:none; font-weight:bold; }
    .item a:hover { text-decoration:underline; }
    .photo-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:10px; }
    .photo-grid img { width:100%; height:120px; object-fit:cover; border-radius:8px; background:#222; }
    .history-list span { display:inline-block; background:#222; padding:6px 10px; border-radius:999px; margin:4px; }
  </style>
</head>
<body>
  <div class="split">
    <div class="half"></div>
    <div class="half"></div>
    <div class="card">
      <div id="home">
        <div class="header">
          <h1>Searchmas ðŸŽ…ðŸŽ„</h1>
          <div class="profile-btn" id="profileBtn">
            <img src="https://upload.wikimedia.org/wikipedia/en/7/70/Windows_7_flower_avatar.png" alt="Profile">
            <span>History</span>
          </div>
        </div>
        <div class="bar">
          <input id="q" type="text" placeholder="Searchâ€¦">
          <button id="go">Search</button>
        </div>
      </div>
      <div id="results" style="display:none;">
        <div class="bar">
          <input id="qTop" type="text">
          <button id="goTop">Go</button>
          <button id="back">Back</button>
        </div>
        <div class="tabs">
          <button id="tabWeb" class="active">Web</button>
          <button id="tabImages">Images</button>
          <button id="tabVideos">Videos</button>
          <button id="tabNews">News</button>
          <button id="tabDiscuss">Discuss</button>
          <button id="tabHistory">History</button>
        </div>
        <div id="content"></div>
      </div>
      <div id="historyView" style="display:none;">
        <h2>Your Search History</h2>
        <div id="historyList"></div>
        <button id="closeHistory">Close</button>
      </div>
    </div>
  </div>
  <script>
    const home=document.getElementById('home');
    const results=document.getElementById('results');
    const historyView=document.getElementById('historyView');
    const q=document.getElementById('q');
    const qTop=document.getElementById('qTop');
    const content=document.getElementById('content');
    const historyList=document.getElementById('historyList');
    let history=JSON.parse(localStorage.getItem('searchmasHistory')||'[]');

    function saveSearch(query){
      history.unshift(query);
      localStorage.setItem('searchmasHistory',JSON.stringify(history.slice(0,100)));
    }

    function showHistory(){
      historyList.innerHTML='';
      if(history.length===0){historyList.innerHTML='No history yet.';return;}
      history.forEach(h=>{const span=document.createElement('span');span.textContent=h;historyList.appendChild(span);});
    }

    document.getElementById('profileBtn').onclick=()=>{home.style.display='none';results.style.display='none';historyView.style.display='block';showHistory();};
    document.getElementById('closeHistory').onclick=()=>{historyView.style.display='none';home.style.display='block';};

    document.getElementById('go').onclick=()=>enterResults();
    q.addEventListener('keydown',e=>{if(e.key==='Enter'){enterResults();}});
    document.getElementById('goTop').onclick=()=>refreshActive();
    qTop.addEventListener('keydown',e=>{if(e.key==='Enter'){refreshActive();}});
    document.getElementById('back').onclick=()=>{results.style.display='none';home.style.display='block';};

    function getQuery(){return (qTop.value.trim()||q.value.trim());}
    function setActive(id){['tabWeb','tabImages','tabVideos','tabNews','tabDiscuss','tabHistory'].forEach(t=>document.getElementById(t).classList.remove('active'));document.getElementById(id).classList.add('active');}
    function activeTab(){return ['tabWeb','tabImages','tabVideos','tabNews','tabDiscuss','tabHistory'].find(t=>document.getElementById(t).classList.contains('active'))||'tabWeb';}

    function enterResults(){
      const query=getQuery();
      if(!query){alert("Type something to search");return;}
      saveSearch(query);
      home.style.display='none';
      historyView.style.display='none';
      results.style.display='block';
      qTop.value=query;
      showWeb();
    }

    function refreshActive(){
      const id=activeTab();
      if(id==='tabWeb')showWeb();
      else if(id==='tabImages')showImages();
      else if(id==='tabVideos')showVideos();
      else if(id==='tabNews')showNews();
      else if(id==='tabDiscuss')showDiscuss();
      else showHistoryTab();
    }

    function favicon(url){try{return 'https://www.google.com/s2/favicons?domain='+new URL(url).hostname;}catch{return 'https://www.google.com/favicon.ico';}}
    function item(label,url){return `<div class="item"><img src="${favicon(url)}"><a href="${url}" target="_blank">${label}</a></div>`;}

    function showWeb(){
      const q=getQuery();
      if(!q)return;
      setActive('tabWeb');
      content.innerHTML=
        item('Google: '+q,'https://www.google.com/search?q='+encodeURIComponent(q))+
        item('Wikipedia: '+q,'https://en.wikipedia.org/wiki/Special:Search?search='+encodeURIComponent(q))+
        `<div class="item"><img src="https://chat.openai.com/favicon.ico"><a href="https://chat.openai.com/?q=${encodeURIComponent(q)}" target="_blank">ChatGPT: ${q}</a></div>`+
        `<div class="item"><img src="https://www.gstatic.com/lamda/images/gemini_symbol.png"><a href="https://gemini.google.com/app/search?q=${encodeURIComponent(q)}" target="_blank">Gemini: ${q}</a></div>`;
    }

    async function showImages(){
      const q=getQuery();
      if(!q)return;
      setActive('tabImages');
      try{
        const res=await fetch(`https://api.unsplash.com/search/photos?query=${encodeURIComponent(q)}&per_page=12&client_id=b6Om1yQejxS88kA2na-UYEct9z
