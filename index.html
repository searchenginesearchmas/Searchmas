<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Searchmas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{margin:0;padding:0;height:100%;font-family:Arial,sans-serif;}
body{
  background:
    url('Santa.png') left center / 50% 100vh no-repeat,
    url('Santa.png') right center / 50% 100vh no-repeat;
}

#home{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}

.logo{
  font-size:clamp(48px,10vw,80px);
  font-weight:bold;
}

.search-box{max-width:580px;width:90%;}
input{
  width:100%;
  padding:14px 20px;
  font-size:18px;
  border-radius:24px;
  border:1px solid #dfe1e5;
}

#results{
  display:none;
  min-height:100vh;
  background:#339933;
  padding:15px;
}

.topbar{
  display:flex;
  gap:10px;
  align-items:center;
}

.back{
  font-size:22px;
  cursor:pointer;
}

.tabs{
  display:flex;
  gap:18px;
  margin:15px 0;
  border-bottom:1px solid rgba(255,255,255,.35);
}

.tab{
  cursor:pointer;
  color:#eaffea;
  padding-bottom:6px;
}

.tab.active{
  border-bottom:3px solid #fff;
  color:#fff;
}

#content{
  background:#fff;
  border-radius:14px;
  padding:12px;
  min-height:70vh;
}
</style>

<!-- Google PSE -->
<script async src="https://cse.google.com/cse.js?cx=949e339dabb3b4e60"></script>

</head>

<body>

<div id="home">
  <div class="logo">Searchmas</div>
  <form class="search-box" onsubmit="startSearch(event)">
    <input id="qHome" placeholder="Search the web">
  </form>
</div>

<div id="results">
  <div class="topbar">
    <div class="back" onclick="goHome()">â¬…</div>
    <input id="qTop">
  </div>

  <div class="tabs">
    <div class="tab active" data-tab="all">All</div>
    <div class="tab" data-tab="images">Images</div>
    <div class="tab" data-tab="videos">Videos</div>
    <div class="tab" data-tab="news">News</div>
  </div>

  <div id="content"></div>
</div>

<script>
let tab="all";

const homeEl=document.getElementById("home");
const resEl=document.getElementById("results");
const qHome=document.getElementById("qHome");
const qTop=document.getElementById("qTop");
const content=document.getElementById("content");

function startSearch(e){
  e.preventDefault();
  const q=qHome.value.trim();
  if(!q) return;
  history.pushState({}, "", "?q="+encodeURIComponent(q));
  showResults(q);
}

qTop.onkeydown=e=>{
  if(e.key==="Enter"){
    e.preventDefault();
    const q=qTop.value.trim();
    if(!q) return;
    history.pushState({}, "", "?q="+encodeURIComponent(q));
    showResults(q);
  }
};

document.querySelectorAll(".tab").forEach(t=>{
  t.onclick=()=>{
    document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
    t.classList.add("active");
    tab=t.dataset.tab;
    search();
  };
});

function showResults(q){
  homeEl.style.display="none";
  resEl.style.display="block";
  qTop.value=q;
  search();
}

function goHome(){
  history.replaceState({}, "", location.pathname);
  resEl.style.display="none";
  homeEl.style.display="flex";
}

function search(){
  const q=qTop.value.trim();
  if(!q) return;

  if(tab==="all" || tab==="images"){
    content.innerHTML=`
      <gcse-searchresults-only
        data-query="${q}"
        data-resultset="${tab==='images'?'image':'web'}">
      </gcse-searchresults-only>
    `;
    return;
  }

  if(tab==="videos"){
    content.innerHTML=`
      <a href="https://www.youtube.com/results?search_query=${encodeURIComponent(q)}"
         target="_blank">Open YouTube results for "${q}"</a>
    `;
  }

  if(tab==="news"){
    content.innerHTML=`
      <a href="https://news.google.com/search?q=${encodeURIComponent(q)}"
         target="_blank">Open Google News results for "${q}"</a>
    `;
  }
}

const params=new URLSearchParams(location.search);
const startQ=params.get("q");
if(startQ) showResults(startQ);
</script>

</body>
</html>
